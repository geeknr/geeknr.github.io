<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.66.0 with theme Tranquilpeak 0.4.8-BETA">
<meta name="author" content="何海涛的博客">
<meta name="keywords" content="tech">
<meta name="description" content="Omni Core是Bitcoin Core的一个分支，其Omni协议功能支持作为顶层的新功能层添加。因此，与API的交互以与Bitcoin Core相同的方式（JSON-RPC）完成，只需使用额外的RPC即可使用Omni协议功能。">


<meta property="og:description" content="Omni Core是Bitcoin Core的一个分支，其Omni协议功能支持作为顶层的新功能层添加。因此，与API的交互以与Bitcoin Core相同的方式（JSON-RPC）完成，只需使用额外的RPC即可使用Omni协议功能。">
<meta property="og:type" content="article">
<meta property="og:title" content="区块链之USDT开发笔记">
<meta name="twitter:title" content="区块链之USDT开发笔记">
<meta property="og:url" content="https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">
<meta property="twitter:url" content="https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">
<meta property="og:site_name" content="何海涛的博客">
<meta property="og:description" content="Omni Core是Bitcoin Core的一个分支，其Omni协议功能支持作为顶层的新功能层添加。因此，与API的交互以与Bitcoin Core相同的方式（JSON-RPC）完成，只需使用额外的RPC即可使用Omni协议功能。">
<meta name="twitter:description" content="Omni Core是Bitcoin Core的一个分支，其Omni协议功能支持作为顶层的新功能层添加。因此，与API的交互以与Bitcoin Core相同的方式（JSON-RPC）完成，只需使用额外的RPC即可使用Omni协议功能。">
<meta property="og:locale" content="zh-cn">

  
    <meta property="article:published_time" content="2020-06-03T14:32:50">
  
  
    <meta property="article:modified_time" content="2020-06-03T14:32:50">
  
  
  
    
      <meta property="article:section" content="category">
    
      <meta property="article:section" content="subcategory">
    
  
  
    
      <meta property="article:tag" content="tag1">
    
      <meta property="article:tag" content="tag2">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@adityamangal410">


  <meta name="twitter:creator" content="@adityamangal410">










  <meta property="og:image" content="https://hehaitao.vip/profile.jpg">
  <meta property="twitter:image" content="https://hehaitao.vip/profile.jpg">


    <title>区块链之USDT开发笔记</title>

    <link rel="icon" href="https://hehaitao.vip/favicon.ico">
    

    

    <link rel="canonical" href="https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://hehaitao.vip/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-78062737-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://hehaitao.vip/">何海涛的博客</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://hehaitao.vip/#about">
    
    
    
      
        <img class="header-picture" src="https://hehaitao.vip/profile.jpg" alt="作者的图片" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://hehaitao.vip/#about">
          <img class="sidebar-profile-picture" src="https://hehaitao.vip/profile.jpg" alt="作者的图片" />
        </a>
        <h4 class="sidebar-profile-name">何海涛的博客</h4>
        
          <h5 class="sidebar-profile-bio">梦想还是要有的万一实现了呢！ <strong>加油吧少年</strong></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hehaitao.vip/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">首页</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hehaitao.vip/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">分类</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hehaitao.vip/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">标签</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hehaitao.vip/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">归档</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hehaitao.vip/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">关于</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/adityamangal410" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/adityamangal410" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/adityamangal410/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">Linkedin</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="mailto:adityamangal410@yahoo.co.in" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-envelope"></i>
      
      <span class="sidebar-button-desc">Email</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://hehaitao.vip/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      区块链之USDT开发笔记
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2020-06-03T14:32:50&#43;08:00">
        
  六月 3, 2020

      </time>
    
    
  
  
    <span>发布在</span>
    
      <a class="category-link" href="https://hehaitao.vip/categories/category">category</a>, 
    
      <a class="category-link" href="https://hehaitao.vip/categories/subcategory">subcategory</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>Omni Core是Bitcoin Core的一个分支，其Omni协议功能支持作为顶层的新功能层添加。因此，与API的交互以与Bitcoin Core相同的方式（JSON-RPC）完成，只需使用额外的RPC即可使用Omni协议功能。</p>
<h2 id="第三方接口">第三方接口</h2>
<pre><code>curl -X POST -H &quot;Content-Type: application/x-www-form-urlencoded&quot; -H &quot;Content-Type: application/x-www-form-urlencoded&quot; -d &quot;signedTransaction=0200000001f1923b0bafbf68a6ecdbfe65f7d8e0ca86c23280cb96eeaeecfa7aea038950ae000000006a47304402203cbdbd15368856db08adffb22110cadb9b343af5b3c610b9af63bd8fd792c11202203a5b1916d4cd638619a4d3614a22b1cf339d88201a934f2ed1610ac9d36714b2012103fe44259b70361912a21eb12e300df2bb9b7933381ed338989b28c6a01c8d2431ffffffff0322020000000000001976a9142047c920791ae2b8e764ff51a684134dccb67f6e88ac0000000000000000166a146f6d6e69000000000000001f0000000005f5e1001e811900000000001976a91494687e55ebc2d011f5bf7825adaaa15e8a7c383288ac00000000&quot; &quot;https://api.omniexplorer.info/v1/transaction/pushtx/&quot;
</code></pre><h2 id="交易">交易</h2>
<p>最近几天在对接USDT钱包，遇到一个问题就是根本没办法通过omni 钱包提供的API来实现钱包归集，因为API提供的接口都需要发送USDT的地址有一定的BTC数量才可以发送交易，所以没办只能找其他方案替代，请教了其他人后才知道只能通过创建BTC的原生交易才能达到这个效果，折腾了好几天，终于把这个流程给整理通顺了，估计还有很多人会遇到这个问题，所以记录下来为后面的人节省一些时间。</p>
<h3 id="1准备两个地址">1、准备两个地址</h3>
<p>首先两个地址, 发送USDT（地址里面要有USDT，这里通常可能是交易所用户的USDT钱包地址）地址和付手续费的地址（地址里面要有足够的BTC，这里通常可能是热钱包地址）</p>
<p>本次案例中</p>
<p>发送USDT地址为： mn7w1M4fwJzRr4zYy5dMSSfBg1ZC9e4xH4</p>
<p>付手续费地址为： muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe</p>
<p>接收USDT地址为：muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe</p>
<h3 id="2分别找到发送地址-和热钱包地址的一笔uxto-作为发送usdt交易的载体">2、分别找到发送地址 和热钱包地址的一笔UXTO 作为发送USDT交易的载体</h3>
<p>指令：listunspent 0 999999 &lsquo;[&ldquo;mn7w1M4fwJzRr4zYy5dMSSfBg1ZC9e4xH4&rdquo;]&rsquo;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{

<span style="color:#f92672">&#34;txid&#34;</span>: <span style="color:#e6db74">&#34;7ef4ca48422fbd055eb7375145cb59bdadaba13caf29b4279c506a7ba846a33e&#34;</span>,
<span style="color:#f92672">&#34;vout&#34;</span>: <span style="color:#ae81ff">0</span>,
<span style="color:#f92672">&#34;address&#34;</span>: <span style="color:#e6db74">&#34;mn7w1M4fwJzRr4zYy5dMSSfBg1ZC9e4xH4&#34;</span>,
<span style="color:#f92672">&#34;scriptPubKey&#34;</span>: <span style="color:#e6db74">&#34;76a914486e3cf761cc47642135140da02669c04dd2451088ac&#34;</span>,
<span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#ae81ff">0.00081189</span>,
<span style="color:#f92672">&#34;confirmations&#34;</span>: <span style="color:#ae81ff">31103</span>,
<span style="color:#f92672">&#34;spendable&#34;</span>: <span style="color:#66d9ef">true</span>,
<span style="color:#f92672">&#34;solvable&#34;</span>: <span style="color:#66d9ef">true</span>

}

</code></pre></div><p>指令：listunspent 0 999999 &lsquo;[&ldquo;muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe&rdquo;]&rsquo;</p>
<p>得到UXTO:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{

<span style="color:#f92672">&#34;txid&#34;</span>: <span style="color:#e6db74">&#34;0b381b15082156911ca8db2761910fe9545356778d70dd09be30fc0bece9ed9d&#34;</span>,
<span style="color:#f92672">&#34;vout&#34;</span>: <span style="color:#ae81ff">1</span>,
<span style="color:#f92672">&#34;address&#34;</span>: <span style="color:#e6db74">&#34;muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe&#34;</span>,
<span style="color:#f92672">&#34;account&#34;</span>: <span style="color:#e6db74">&#34;sys&#34;</span>,
<span style="color:#f92672">&#34;scriptPubKey&#34;</span>: <span style="color:#e6db74">&#34;76a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac&#34;</span>,
<span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#ae81ff">0.00992750</span>,
<span style="color:#f92672">&#34;confirmations&#34;</span>: <span style="color:#ae81ff">4137</span>,
<span style="color:#f92672">&#34;spendable&#34;</span>: <span style="color:#66d9ef">true</span>,
<span style="color:#f92672">&#34;solvable&#34;</span>: <span style="color:#66d9ef">true</span>

}

</code></pre></div><h3 id="3创建负载">3、创建负载</h3>
<blockquote>
<p>指令：</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">createrawtransaction</span>
<span style="color:#e6db74">&#39;[{&#34;txid&#34;:&#34;7ef4ca48422fbd055eb7375145cb59bdadaba13caf29b4279c506a7ba846a33e&#34;,&#34;vout&#34;:0},{&#34;txid&#34;:&#34;0b381b15082156911ca8db2761910fe9545356778d70dd09be30fc0bece9ed9d&#34;,&#34;vout&#34;:1,&#34;scriptPubKey&#34;:&#34;76a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac&#34;,&#34;value&#34;: 0.00992750}]&#39;</span> <span style="color:#e6db74">&#39;{}&#39;</span>


<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">得到</span><span style="color:#960050;background-color:#1e0010">：</span>

<span style="color:#ae81ff">01000000023</span><span style="color:#a6e22e">ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff0000000000</span>

<span style="color:#960050;background-color:#1e0010">###</span> <span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">、</span><span style="color:#a6e22e">创建USDT交易</span>
<span style="color:#a6e22e">指令</span>(<span style="color:#a6e22e">代币ID</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">发送代币数量</span>)<span style="color:#960050;background-color:#1e0010">：</span><span style="color:#a6e22e">omni_createpayload_simplesend</span> <span style="color:#ae81ff">31</span> <span style="color:#ae81ff">2.0</span>

<span style="color:#a6e22e">得到</span><span style="color:#960050;background-color:#1e0010">：</span><span style="color:#ae81ff">000000000000000100000000001</span><span style="color:#a6e22e">e8480</span>

<span style="color:#960050;background-color:#1e0010">###</span> <span style="color:#ae81ff">5</span><span style="color:#960050;background-color:#1e0010">、</span><span style="color:#a6e22e">在交易上绑定代币数据</span>
<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">指令</span><span style="color:#960050;background-color:#1e0010">：</span>

<span style="color:#a6e22e">omni_createrawtx_opreturn</span> <span style="color:#ae81ff">01000000023</span><span style="color:#a6e22e">ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff0000000000</span> <span style="color:#ae81ff">000000000000000100000000001</span><span style="color:#a6e22e">e8480</span>

<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">得到</span><span style="color:#960050;background-color:#1e0010">（</span><span style="color:#a6e22e">事务hash</span><span style="color:#960050;background-color:#1e0010">）：</span>

<span style="color:#ae81ff">01000000023</span><span style="color:#a6e22e">ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff010000000000000000166a146f6d6e69000000000000000100000000001e848000000000</span>

<span style="color:#960050;background-color:#1e0010">###</span> <span style="color:#ae81ff">6</span><span style="color:#960050;background-color:#1e0010">、</span><span style="color:#a6e22e">在交易上添加接收地址</span>
<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">指令</span><span style="color:#960050;background-color:#1e0010">：</span>

<span style="color:#a6e22e">omni_createrawtx_reference</span> <span style="color:#ae81ff">01000000023</span><span style="color:#a6e22e">ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff010000000000000000166a146f6d6e69000000000000000100000000001e848000000000</span> <span style="color:#a6e22e">muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe</span>

<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">得到</span><span style="color:#960050;background-color:#1e0010">（</span><span style="color:#a6e22e">事务hash</span><span style="color:#960050;background-color:#1e0010">）：</span>

<span style="color:#ae81ff">01000000023</span><span style="color:#a6e22e">ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000</span>

<span style="color:#960050;background-color:#1e0010">###</span> <span style="color:#ae81ff">7</span><span style="color:#960050;background-color:#1e0010">、</span><span style="color:#a6e22e">在交易上指定矿工费用</span>
<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">指令</span><span style="color:#960050;background-color:#1e0010">：（</span><span style="color:#a6e22e">事务HASH</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">交易信息</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">找零地址</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">手续费</span><span style="color:#960050;background-color:#1e0010">）</span>

<span style="color:#a6e22e">omni_createrawtx_change</span> <span style="color:#ae81ff">01000000023</span><span style="color:#a6e22e">ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000</span> <span style="color:#e6db74">&#39;[{&#34;txid&#34;:&#34;7ef4ca48422fbd055eb7375145cb59bdadaba13caf29b4279c506a7ba846a33e&#34;,&#34;vout&#34;:1,&#34;scriptPubKey&#34;:&#34;76a914486e3cf761cc47642135140da02669c04dd2451088ac&#34;,&#34;value&#34;: 0.0002},{&#34;txid&#34;:&#34;0b381b15082156911ca8db2761910fe9545356778d70dd09be30fc0bece9ed9d&#34;,&#34;vout&#34;:1,&#34;scriptPubKey&#34;:&#34;76a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac&#34;,&#34;value&#34;: 0.0002}]&#39;</span> <span style="color:#a6e22e">muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe</span> <span style="color:#ae81ff">0.0002</span>

<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">得到</span><span style="color:#960050;background-color:#1e0010">（</span><span style="color:#a6e22e">事务hash</span><span style="color:#960050;background-color:#1e0010">）：</span>
</code></pre></div><pre><code>01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000
</code></pre><h3 id="8对交易签名">8、对交易签名</h3>
<blockquote>
<p>指令：</p>
</blockquote>
<pre><code>signrawtransaction 01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000
</code></pre><blockquote>
<p>得到（区块信息）：</p>
</blockquote>
<pre><code>{

&quot;hex&quot;: &quot;01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e000000006b483045022100d790995554bbda790f44db19a6e59e84ab5c2ab27577be1c406f09e76d6e7fe402204db6ef71c96a22fd91e230787a521c47e3acc0a9b66dae2b08151ef74c1a0e5e012103ad3414464aec8d4f0cdc3fd2540a255c0bc8f20d157f6aa39ce67564e92d3077ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b010000006a473044022073d01e964d0a94540adc5d9db778d2b768043ba071cf5f49af2c2b07a99f6db702202e9870ac127e0ba06226c69242016255e9230816d6eab96ca89ad968111a49a7012103e6f952da72a83b16443d70dbb2e30473b25d6c71a6fdc01fbfbf0638805b4218ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000&quot;,

&quot;complete&quot;: true

}
</code></pre><h3 id="9广播交易">9、广播交易</h3>
<blockquote>
<p>指令：</p>
</blockquote>
<pre><code>Sendrawtransaction 01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e000000006b483045022100d790995554bbda790f44db19a6e59e84ab5c2ab27577be1c406f09e76d6e7fe402204db6ef71c96a22fd91e230787a521c47e3acc0a9b66dae2b08151ef74c1a0e5e012103ad3414464aec8d4f0cdc3fd2540a255c0bc8f20d157f6aa39ce67564e92d3077ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b010000006a473044022073d01e964d0a94540adc5d9db778d2b768043ba071cf5f49af2c2b07a99f6db702202e9870ac127e0ba06226c69242016255e9230816d6eab96ca89ad968111a49a7012103e6f952da72a83b16443d70dbb2e30473b25d6c71a6fdc01fbfbf0638805b4218ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000
</code></pre><blockquote>
<p>得到（交易ID）：</p>
</blockquote>
<p>ab28fcd449d1f8e57ead070d798d80fe8f962168341b383adf5bf07fe80e652d</p>
<p>注意：每次操作后可用指令：</p>
<p>decoderawtransaction 事务ID 和 omni_decodetransaction 事务ID来查看当前构建的交易信息情况。</p>
<blockquote>
<p><strong>参考地址</strong></p>
</blockquote>
<p><a href="https://www.zhihu.com/people/duan-pan-ykjym/activities">https://www.zhihu.com/people/duan-pan-ykjym/activities</a></p>
<!-- raw HTML omitted -->
<ul>
<li><a href="https://github.com/OmniLayer/omnicore/wiki/Use-the-raw-transaction-API-to-create-a-Simple-Send-transaction">使用原始事务API创建简单发送事务</a></li>
</ul>
<h2 id="命令">命令</h2>
<p>常用基础命令</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">omnicore-cli listaccounts <span style="color:#e6db74">&#34;coinrise&#34;</span>
omnicore-cli getaddressesbyaccount <span style="color:#e6db74">&#34;&#34;</span>
omnicore-cli getaddressesbyaccount <span style="color:#e6db74">&#34;coinrise&#34;</span>
omnicore-cli omni_getbalance <span style="color:#e6db74">&#34;1EXiBj8pkxmsPb6dNAMLFcZYTRSNsUUesS&#34;</span> 31
omnicore-cli omni_getbalance <span style="color:#e6db74">&#34;129sqfPm5uKYH3a1W4n5y1PbSkta8MthcH&#34;</span> 1

omnicore-cli listunspent <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">999999</span> <span style="color:#e6db74">&#34;[\&#34;12c6DSiU4Rq3P4ZxziKxzrL5LmMBrzjrJX\&#34;]&#34;</span>
omnicore-cli listunspent <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">999999</span> <span style="color:#e6db74">&#34;[\&#34;1K6JtSvrHtyFmxdtGZyZEF7ydytTGqasNc\&#34;,\&#34;13GJVDVyXNPA24vnGPkeZccboRsdpscWkX\&#34;]&#34;</span>

omnicore-cli omni_send <span style="color:#e6db74">&#34;1EXiBj8pkxmsPb6dNAMLFcZYTRSNsUUesS&#34;</span> <span style="color:#e6db74">&#34;1JzMWUKnHgMaXXEqiau1ktAFr2hevLsZPw&#34;</span>  <span style="color:#ae81ff">1</span> <span style="color:#e6db74">&#34;0.1&#34;</span>
</code></pre></div><h3 id="omnicore-cli-getinfo">omnicore-cli getinfo</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#ae81ff">130200</span>,
  <span style="color:#f92672">&#34;protocolversion&#34;</span>: <span style="color:#ae81ff">70015</span>,
  <span style="color:#f92672">&#34;walletversion&#34;</span>: <span style="color:#ae81ff">130000</span>,
  <span style="color:#f92672">&#34;balance&#34;</span>: <span style="color:#ae81ff">0.00000000</span>,
  <span style="color:#f92672">&#34;blocks&#34;</span>: <span style="color:#ae81ff">584885</span>,
  <span style="color:#f92672">&#34;timeoffset&#34;</span>: <span style="color:#ae81ff">-1</span>,
  <span style="color:#f92672">&#34;connections&#34;</span>: <span style="color:#ae81ff">110</span>,
  <span style="color:#f92672">&#34;proxy&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
  <span style="color:#f92672">&#34;difficulty&#34;</span>: <span style="color:#ae81ff">9064159826491.41</span>,
  <span style="color:#f92672">&#34;testnet&#34;</span>: <span style="color:#66d9ef">false</span>,
  <span style="color:#f92672">&#34;keypoololdest&#34;</span>: <span style="color:#ae81ff">1558404031</span>,
  <span style="color:#f92672">&#34;keypoolsize&#34;</span>: <span style="color:#ae81ff">100</span>,
  <span style="color:#f92672">&#34;paytxfee&#34;</span>: <span style="color:#ae81ff">0.00000000</span>,
  <span style="color:#f92672">&#34;relayfee&#34;</span>: <span style="color:#ae81ff">0.00001000</span>,
  <span style="color:#f92672">&#34;errors&#34;</span>: <span style="color:#e6db74">&#34;Warning: Unknown block versions being mined! It&#39;s possible unknown rules are in effect&#34;</span>
}

</code></pre></div><h3 id="importaddress">importaddress</h3>
<p><code>omnicore-cli importaddress &quot;1EXiBj8pkxmsPb6dNAMLFcZYTRSNsUUesS&quot;</code></p>
<p>由于所有现有的比特币核心功能都是Omni Core固有的，因此默认情况下RPC端口保持8332与每个比特币核心一样。如果您希望与比特币核心一起运行Omni Core（例如，通过单独的数据中心），则可以使用该-rpcport<!-- raw HTML omitted -->选项提名替代端口号。</p>
<h3 id="omni_send">omni_send</h3>
<p>创建并广播一个简单的发送事务。</p>
<p>参数：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>存在</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>fromaddress</td>
<td>string</td>
<td>需要</td>
<td>要发送的地址</td>
</tr>
<tr>
<td>toaddress</td>
<td>string</td>
<td>需要</td>
<td>接收者的地址</td>
</tr>
<tr>
<td>propertyid</td>
<td>int</td>
<td>需要</td>
<td>要发送的令牌的标识符</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>需要</td>
<td>要发送的金额</td>
</tr>
<tr>
<td>redeemaddress</td>
<td>string</td>
<td>可选的</td>
<td>一个可以花费交易粉尘的地址（默认发件人）</td>
</tr>
<tr>
<td>referenceamount</td>
<td>string</td>
<td>可选的</td>
<td>发送给接收方的比特币金额（默认情况下最小）</td>
</tr>
</tbody>
</table>
<p>例如：</p>
<p><code>$ omnicore-cli “ omni_send ”  “ 3M9qvHKtgARhqcMtM5cRT9VaiDJ5PSfQGY ”  “ 37FaKponF7zqoMLUjEiko25pDiuVH5YLEa ” 1 “ 100.0 ”</code></p>
<p>结果：
hash          //（字符串）十六进制编码的事务散列</p>
<h3 id="omni_sendall">omni_sendall</h3>
<p>Transfers all available tokens in the given ecosystem to the recipient.</p>
<p>Arguments:</p>
<p>Name	Type	Presence	Description
fromaddress	string	required	the address to send from
toaddress	string	required	the address of the receiver
ecosystem	number	required	the ecosystem of the tokens to send (1 for main ecosystem, 2 for test ecosystem)
redeemaddress	string	optional	an address that can spend the transaction dust (sender by default)
referenceamount	string	optional	a bitcoin amount that is sent to the receiver (minimal by default)
Result:</p>
<pre><code>&quot;hash&quot;  // (string) the hex-encoded transaction hash
</code></pre><p>Example:</p>
<p>$ omnicore-cli &ldquo;omni_sendall&rdquo; &ldquo;3M9qvHKtgARhqcMtM5cRT9VaiDJ5PSfQGY&rdquo; &ldquo;37FaKponF7zqoMLUjEiko25pDiuVH5YLEa&rdquo; 2</p>
<h3 id="omni_sendrawtx">omni_sendrawtx</h3>
<p>广播原始的Omni Layer交易。</p>
<p>参数：</p>
<p>名称	类型	存在	描述
fromaddress	串	需要	要发送的地址
rawtransaction	串	需要	十六进制编码的原始事务
referenceaddress	串	可选的	一个参考地址（默认没有）
redeemaddress	串	可选的	一个可以花费交易粉尘的地址（默认发件人）
referenceamount	串	可选的	发送给接收方的比特币金额（默认情况下最小）
结果：</p>
<p>“ hash ”   //（字符串）十六进制编码的事务散列
例：</p>
<p>$ omnicore-cli “ omni_sendrawtx ”<br>
“ 1MCHESTptvd2LnNp7wmr2sGTpRomteAkq8 ”  “ 000000000000000100000000017d7840 ”<br>
“ 1EqTta1Rt8ixAA32DuC29oukbsSWU62qAV ”
数据检索
用于数据检索的RPC可用于获取有关Omni生态系统状态的信息。</p>
<h3 id="omni_getinfo">omni_getinfo</h3>
<p>Returns various state information of the client and protocol.</p>
<p>Arguments:</p>
<p>None</p>
<p>Result:</p>
<p>Result:</p>
<pre><code>{
  &quot;omnicoreversion_int&quot; : xxxxxxx,      // (number) client version as integer
  &quot;omnicoreversion&quot; : &quot;x.x.x.x-xxx&quot;,    // (string) client version
  &quot;mastercoreversion&quot; : &quot;x.x.x.x-xxx&quot;,  // (string) client version (DEPRECIATED)
  &quot;bitcoincoreversion&quot; : &quot;x.x.x&quot;,       // (string) Bitcoin Core version
  &quot;commitinfo&quot; : &quot;xxxxxxx&quot;,             // (string) build commit identifier
  &quot;block&quot; : nnnnnn,                     // (number) index of the last processed block
  &quot;blocktime&quot; : nnnnnnnnnn,             // (number) timestamp of the last processed block
  &quot;blocktransactions&quot; : nnnn,           // (number) Omni transactions found in the last processed block
  &quot;totaltransactions&quot; : nnnnnnnn,       // (number) Omni transactions processed in total
  &quot;alerts&quot; : [                          // (array of JSON objects) active protocol alert (if any)
    {
      &quot;alerttype&quot; : n                       // (number) alert type as integer
      &quot;alerttype&quot; : &quot;xxx&quot;                   // (string) alert type (can be &quot;alertexpiringbyblock&quot;, &quot;alertexpiringbyblocktime&quot;, &quot;alertexpiringbyclientversion&quot; or &quot;error&quot;)
      &quot;alertexpiry&quot; : &quot;nnnnnnnnnn&quot;          // (string) expiration criteria (can refer to block height, timestamp or client verion)
      &quot;alertmessage&quot; : &quot;xxx&quot;                // (string) information about the alert
    },
    ...
  ]
}
</code></pre><p>Example:</p>
<p>Example:</p>
<p>$ omnicore-cli &ldquo;omni_getinfo&rdquo;</p>
<h3 id="omni_getbalance">omni_getbalance</h3>
<p>Returns the token balance for a given address and property.</p>
<p>Arguments:</p>
<p>Name	Type	Presence	Description
address	string	required	the address
propertyid	number	required	the property identifier
Result:</p>
<pre><code>{
  &quot;balance&quot; : &quot;n.nnnnnnnn&quot;,  // (string) the available balance of the address
  &quot;reserved&quot; : &quot;n.nnnnnnnn&quot;, // (string) the amount reserved by sell offers and accepts
  &quot;frozen&quot; : &quot;n.nnnnnnnn&quot;    // (string) the amount frozen by the issuer (applies to managed properties only)
}
</code></pre><p>Example:</p>
<p>$ omnicore-cli &ldquo;omni_getbalance&rdquo;, &ldquo;1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P&rdquo; 1
omni_getallbalancesforid
Returns a list of token balances for a given currency or property identifier.</p>
<p>Arguments:</p>
<p>Name	Type	Presence	Description
propertyid	number	required	the property identifier
Result:</p>
<pre><code>[                          // (array of JSON objects)
  {
    &quot;address&quot; : &quot;address&quot;,     // (string) the address
    &quot;balance&quot; : &quot;n.nnnnnnnn&quot;,  // (string) the available balance of the address
    &quot;reserved&quot; : &quot;n.nnnnnnnn&quot;  // (string) the amount reserved by sell offers and accepts
  },
  ...
]
</code></pre><p>Example:</p>
<p>$ omnicore-cli &ldquo;omni_getallbalancesforid&rdquo; 1</p>
<h3 id="omni_getallbalancesforaddress">omni_getallbalancesforaddress</h3>
<p>Returns a list of all token balances for a given address.</p>
<p>Arguments:</p>
<p>Name	Type	Presence	Description
address	string	required	the address
Result:</p>
<pre><code>[                          // (array of JSON objects)
  {
    &quot;propertyid&quot; : n,          // (number) the property identifier
    &quot;balance&quot; : &quot;n.nnnnnnnn&quot;,  // (string) the available balance of the address
    &quot;reserved&quot; : &quot;n.nnnnnnnn&quot;  // (string) the amount reserved by sell offers and accepts
  },
  ...
]
</code></pre><p>Example:</p>
<p>$ omnicore-cli &ldquo;omni_getallbalancesforaddress&rdquo; &ldquo;1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P&rdquo;</p>
<h3 id="omni_gettransaction">omni_gettransaction</h3>
<p>Get detailed information about an Omni transaction.</p>
<p>Arguments:</p>
<p>Name	Type	Presence	Description
txid	string	required	the hash of the transaction to lookup
Result:</p>
<pre><code>{
  &quot;txid&quot; : &quot;hash&quot;,                 // (string) the hex-encoded hash of the transaction
  &quot;sendingaddress&quot; : &quot;address&quot;,    // (string) the Bitcoin address of the sender
  &quot;referenceaddress&quot; : &quot;address&quot;,  // (string) a Bitcoin address used as reference (if any)
  &quot;ismine&quot; : true|false,           // (boolean) whether the transaction involes an address in the wallet
  &quot;confirmations&quot; : nnnnnnnnnn,    // (number) the number of transaction confirmations
  &quot;fee&quot; : &quot;n.nnnnnnnn&quot;,            // (string) the transaction fee in bitcoins
  &quot;blocktime&quot; : nnnnnnnnnn,        // (number) the timestamp of the block that contains the transaction
  &quot;valid&quot; : true|false,            // (boolean) whether the transaction is valid
  &quot;positioninblock&quot; : n,           // (number) the position (index) of the transaction within the block
  &quot;version&quot; : n,                   // (number) the transaction version
  &quot;type_int&quot; : n,                  // (number) the transaction type as number
  &quot;type&quot; : &quot;type&quot;,                 // (string) the transaction type as string
  [...]                            // (mixed) other transaction type specific properties
}
</code></pre><p>Example:</p>
<p>$ omnicore-cli &ldquo;omni_gettransaction&rdquo; &ldquo;1075db55d416d3ca199f55b6084e2115b9345e16c5cf302fc80e9d5fbf5d48d&rdquo;</p>
<h3 id="omni_listtransactions">omni_listtransactions</h3>
<p>List wallet transactions, optionally filtered by an address and block boundaries.</p>
<p>Arguments:</p>
<p>Name	Type	Presence	Description
txid	string	optional	address filter (default: &ldquo;*&quot;)
count	number	optional	show at most n transactions (default: 10)
skip	number	optional	skip the first n transactions (default: 0)
startblock	number	optional	first block to begin the search (default: 0)
endblock	number	optional	last block to include in the search (default: 999999)
Result:</p>
<pre><code>[                                // (array of JSON objects)
  {
    &quot;txid&quot; : &quot;hash&quot;,                 // (string) the hex-encoded hash of the transaction
    &quot;sendingaddress&quot; : &quot;address&quot;,    // (string) the Bitcoin address of the sender
    &quot;referenceaddress&quot; : &quot;address&quot;,  // (string) a Bitcoin address used as reference (if any)
    &quot;ismine&quot; : true|false,           // (boolean) whether the transaction involves an address in the wallet
    &quot;confirmations&quot; : nnnnnnnnnn,    // (number) the number of transaction confirmations
    &quot;fee&quot; : &quot;n.nnnnnnnn&quot;,            // (string) the transaction fee in bitcoins
    &quot;blocktime&quot; : nnnnnnnnnn,        // (number) the timestamp of the block that contains the transaction
    &quot;valid&quot; : true|false,            // (boolean) whether the transaction is valid
    &quot;positioninblock&quot; : n,           // (number) the position (index) of the transaction within the block
    &quot;version&quot; : n,                   // (number) the transaction version
    &quot;type_int&quot; : n,                  // (number) the transaction type as number
    &quot;type&quot; : &quot;type&quot;,                 // (string) the transaction type as string
    [...]                            // (mixed) other transaction type specific properties
  },
  ...
]
</code></pre><p>Example:</p>
<p>$ omnicore-cli &ldquo;omni_listtransactions&rdquo;
omni_listblocktransactions
Lists all Omni transactions in a block.</p>
<p>Arguments:</p>
<p>Name	Type	Presence	Description
index	number	required	the block height or block index</p>
<pre><code>Result:

[      // (array of string)
  &quot;hash&quot;,  // (string) the hash of the transaction
  ...
]
</code></pre><p>Example:</p>
<p>Example:</p>
<p>$ omnicore-cli &ldquo;omni_listblocktransactions&rdquo; 279007</p>
<h3 id="omni_listpendingtransactions">omni_listpendingtransactions</h3>
<p>Returns a list of unconfirmed Omni transactions, pending in the memory pool.</p>
<p>Note: the validity of pending transactions is uncertain, and the state of the memory pool may change at any moment. It is recommended to check transactions after confirmation, and pending transactions should be considered as invalid.</p>
<p>Arguments:</p>
<p>Name	Type	Presence	Description
address	string	optional	filter results by address (default: &quot;&rdquo; for no filter)
Result:</p>
<pre><code>[                                // (array of JSON objects)
  {
    &quot;txid&quot; : &quot;hash&quot;,                 // (string) the hex-encoded hash of the transaction
    &quot;sendingaddress&quot; : &quot;address&quot;,    // (string) the Bitcoin address of the sender
    &quot;referenceaddress&quot; : &quot;address&quot;,  // (string) a Bitcoin address used as reference (if any)
    &quot;ismine&quot; : true|false,           // (boolean) whether the transaction involes an address in the wallet
    &quot;fee&quot; : &quot;n.nnnnnnnn&quot;,            // (string) the transaction fee in bitcoins
    &quot;version&quot; : n,                   // (number) the transaction version
    &quot;type_int&quot; : n,                  // (number) the transaction type as number
    &quot;type&quot; : &quot;type&quot;,                 // (string) the transaction type as string
    [...]                            // (mixed) other transaction type specific properties
  },
  ...
]
</code></pre><p>Example:</p>
<p>$ omnicore-cli &ldquo;omni_listpendingtransactions&rdquo;</p>
<h2 id="变更历史">变更历史</h2>
<p>以下调用在Omni Core 0.0.10中被替换，并且使用旧命令的查询被转发。</p>
<pre><code>send_MP 通过 omni_send
sendtoowners_MP 通过 omni_sendsto
sendrawtx_MP 通过 omni_sendrawtx
getinfo_MP 通过 omni_getinfo
getbalance_MP 通过 omni_getbalance
getallbalancesforid_MP 通过 omni_getallbalancesforid
getallbalancesforaddress_MP 通过 omni_getallbalancesforaddress
gettransaction_MP 通过 omni_gettransaction
listtransactions_MP 通过 omni_listtransactions
listblocktransactions_MP 通过 omni_listblocktransactions
getactivedexsells_MP 通过 omni_getactivedexsells
listproperties_MP 通过 omni_listproperties
getproperty_MP 通过 omni_getproperty
getactivecrowdsales_MP 通过 omni_getactivecrowdsales
getcrowdsale_MP 通过 omni_getcrowdsale
getgrants_MP 通过 omni_getgrants
getsto_MP通过omni_getsto或omni_gettransaction
</code></pre><h2 id="归集通过节点">归集（通过节点）</h2>
<p><a href="https://www.jianshu.com/p/9a72954d24ea">https://www.jianshu.com/p/9a72954d24ea</a></p>
<h2 id="附录">附录</h2>
<p>官方网站：</p>
<p><a href="https://www.omnilayer.org/">https://www.omnilayer.org/</a></p>
<p>浏览器：</p>
<p><a href="https://omniexplorer.info/">https://omniexplorer.info/</a></p>
<p>Omni WIKI：</p>
<p><a href="https://github.com/OmniLayer/omnicore/wiki">https://github.com/OmniLayer/omnicore/wiki</a></p>
<p>JSON-RPC API：</p>
<p><a href="https://github.com/OmniLayer/omnicore/blob/master/src/omnicore/doc/rpc-api.md">https://github.com/OmniLayer/omnicore/blob/master/src/omnicore/doc/rpc-api.md</a></p>
<p><a href="https://api.omniexplorer.info/">https://api.omniexplorer.info/</a></p>
<h1 id="钱包归集">钱包归集</h1>
<p>最近几天在对接USDT钱包，遇到一个问题就是根本没办法通过omni 钱包提供的API来实现钱包归集，因为API提供的接口都需要发送USDT的地址有一定的BTC数量才可以发送交易，所以没办只能找其他方案替代，请教了其他人后才知道只能通过创建BTC的原生交易才能达到这个效果，折腾了好几天，终于把这个流程给整理通顺了，估计还有很多人会遇到这个问题，所以记录下来为后面的人节省一些时间。</p>
<h3 id="1准备两个地址-1">1、准备两个地址</h3>
<p>首先两个地址, 发送USDT（地址里面要有USDT，这里通常可能是交易所用户的USDT钱包地址）地址和付手续费的地址（地址里面要有足够的BTC，这里通常可能是热钱包地址）</p>
<p>本次案例中</p>
<p>发送USDT地址为： mn7w1M4fwJzRr4zYy5dMSSfBg1ZC9e4xH4</p>
<p>付手续费地址为： muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe</p>
<p>接收USDT地址为：muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe</p>
<h3 id="2分别找到发送地址-和热钱包地址的一笔uxto-作为发送usdt交易的载体-1">2、分别找到发送地址 和热钱包地址的一笔UXTO 作为发送USDT交易的载体</h3>
<p>指令：listunspent 0 999999 &lsquo;[&ldquo;mn7w1M4fwJzRr4zYy5dMSSfBg1ZC9e4xH4&rdquo;]&rsquo;</p>
<pre><code>{

&quot;txid&quot;: &quot;7ef4ca48422fbd055eb7375145cb59bdadaba13caf29b4279c506a7ba846a33e&quot;,

&quot;vout&quot;: 0,

&quot;address&quot;: &quot;mn7w1M4fwJzRr4zYy5dMSSfBg1ZC9e4xH4&quot;,

&quot;scriptPubKey&quot;: &quot;76a914486e3cf761cc47642135140da02669c04dd2451088ac&quot;,

&quot;amount&quot;: 0.00081189,

&quot;confirmations&quot;: 31103,

&quot;spendable&quot;: true,

&quot;solvable&quot;: true

}
</code></pre><p>指令：listunspent 0 999999 &lsquo;[&ldquo;muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe&rdquo;]&rsquo;</p>
<p>得到UXTO:</p>
<pre><code>{

&quot;txid&quot;: &quot;0b381b15082156911ca8db2761910fe9545356778d70dd09be30fc0bece9ed9d&quot;,

&quot;vout&quot;: 1,

&quot;address&quot;: &quot;muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe&quot;,

&quot;account&quot;: &quot;sys&quot;,

&quot;scriptPubKey&quot;: &quot;76a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac&quot;,

&quot;amount&quot;: 0.00992750,

&quot;confirmations&quot;: 4137,

&quot;spendable&quot;: true,

&quot;solvable&quot;: true

}
</code></pre><h3 id="3创建负载-1">3、创建负载</h3>
<blockquote>
<p>指令：</p>
</blockquote>
<pre><code>createrawtransaction '[{&quot;txid&quot;:&quot;7ef4ca48422fbd055eb7375145cb59bdadaba13caf29b4279c506a7ba846a33e&quot;,&quot;vout&quot;:0},{&quot;txid&quot;:&quot;0b381b15082156911ca8db2761910fe9545356778d70dd09be30fc0bece9ed9d&quot;,&quot;vout&quot;:1,&quot;scriptPubKey&quot;:&quot;76a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac&quot;,&quot;value&quot;: 0.00992750}]' '{}'
</code></pre><blockquote>
<p>得到：</p>
</blockquote>
<pre><code>01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff0000000000
</code></pre><h3 id="4创建usdt交易">4、创建USDT交易</h3>
<p>指令(代币ID，发送代币数量)：omni_createpayload_simplesend 31 2.0</p>
<p>得到：000000000000000100000000001e8480</p>
<h3 id="5在交易上绑定代币数据">5、在交易上绑定代币数据</h3>
<blockquote>
<p>指令：</p>
</blockquote>
<pre><code>omni_createrawtx_opreturn 01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff0000000000 000000000000000100000000001e8480
</code></pre><blockquote>
<p>得到（事务hash）：</p>
</blockquote>
<pre><code>01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff010000000000000000166a146f6d6e69000000000000000100000000001e848000000000
</code></pre><h3 id="6在交易上添加接收地址">6、在交易上添加接收地址</h3>
<blockquote>
<p>指令：</p>
</blockquote>
<pre><code>omni_createrawtx_reference 01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff010000000000000000166a146f6d6e69000000000000000100000000001e848000000000 muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe
</code></pre><blockquote>
<p>得到（事务hash）：</p>
</blockquote>
<pre><code>01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000
</code></pre><h3 id="7在交易上指定矿工费用">7、在交易上指定矿工费用</h3>
<blockquote>
<p>指令：（事务HASH，交易信息，找零地址，手续费）</p>
</blockquote>
<pre><code>omni_createrawtx_change 01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000 '[{&quot;txid&quot;:&quot;7ef4ca48422fbd055eb7375145cb59bdadaba13caf29b4279c506a7ba846a33e&quot;,&quot;vout&quot;:1,&quot;scriptPubKey&quot;:&quot;76a914486e3cf761cc47642135140da02669c04dd2451088ac&quot;,&quot;value&quot;: 0.0002},{&quot;txid&quot;:&quot;0b381b15082156911ca8db2761910fe9545356778d70dd09be30fc0bece9ed9d&quot;,&quot;vout&quot;:1,&quot;scriptPubKey&quot;:&quot;76a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac&quot;,&quot;value&quot;: 0.0002}]' muPuXyRqLBRf8Xyj28d2As8ya4iaw8XWGe 0.0002
</code></pre><blockquote>
<p>得到（事务hash）：</p>
</blockquote>
<pre><code>01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000
</code></pre><h3 id="8对交易签名-1">8、对交易签名</h3>
<blockquote>
<p>指令：</p>
</blockquote>
<pre><code>signrawtransaction 01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e0000000000ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b0100000000ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000
</code></pre><blockquote>
<p>得到（区块信息）：</p>
</blockquote>
<pre><code>{

&quot;hex&quot;: &quot;01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e000000006b483045022100d790995554bbda790f44db19a6e59e84ab5c2ab27577be1c406f09e76d6e7fe402204db6ef71c96a22fd91e230787a521c47e3acc0a9b66dae2b08151ef74c1a0e5e012103ad3414464aec8d4f0cdc3fd2540a255c0bc8f20d157f6aa39ce67564e92d3077ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b010000006a473044022073d01e964d0a94540adc5d9db778d2b768043ba071cf5f49af2c2b07a99f6db702202e9870ac127e0ba06226c69242016255e9230816d6eab96ca89ad968111a49a7012103e6f952da72a83b16443d70dbb2e30473b25d6c71a6fdc01fbfbf0638805b4218ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000&quot;,

&quot;complete&quot;: true

}
</code></pre><h3 id="9广播交易-1">9、广播交易</h3>
<blockquote>
<p>指令：</p>
</blockquote>
<pre><code>Sendrawtransaction 01000000023ea346a87b6a509c27b429af3ca1abadbd59cb455137b75e05bd2f4248caf47e000000006b483045022100d790995554bbda790f44db19a6e59e84ab5c2ab27577be1c406f09e76d6e7fe402204db6ef71c96a22fd91e230787a521c47e3acc0a9b66dae2b08151ef74c1a0e5e012103ad3414464aec8d4f0cdc3fd2540a255c0bc8f20d157f6aa39ce67564e92d3077ffffffff9dede9ec0bfc30be09dd708d77565354e90f916127dba81c91562108151b380b010000006a473044022073d01e964d0a94540adc5d9db778d2b768043ba071cf5f49af2c2b07a99f6db702202e9870ac127e0ba06226c69242016255e9230816d6eab96ca89ad968111a49a7012103e6f952da72a83b16443d70dbb2e30473b25d6c71a6fdc01fbfbf0638805b4218ffffffff020000000000000000166a146f6d6e69000000000000000100000000001e848022020000000000001976a914983c8b990aef5747bdef1f2bf3a49d29b19ae15788ac00000000
</code></pre><blockquote>
<p>得到（交易ID）：</p>
</blockquote>
<p>ab28fcd449d1f8e57ead070d798d80fe8f962168341b383adf5bf07fe80e652d</p>
<p>注意：每次操作后可用指令：</p>
<p>decoderawtransaction 事务ID 和 omni_decodetransaction 事务ID来查看当前构建的交易信息情况。</p>
<blockquote>
<p><strong>参考地址</strong></p>
</blockquote>
<p><a href="https://www.zhihu.com/people/duan-pan-ykjym/activities">https://www.zhihu.com/people/duan-pan-ykjym/activities</a></p>
<h1 id="参考地址">参考地址</h1>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">标签</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://hehaitao.vip/tags/tag1/">tag1</a>

  <a class="tag tag--primary tag--small" href="https://hehaitao.vip/tags/tag2/">tag2</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8B%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/" data-tooltip="区块链之技术开发指南">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">下一篇</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Bfabric%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" data-tooltip="区块链之Fabric环境搭建">
              
                  <span class="hide-xs hide-sm text-small icon-mr">上一篇</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 何海涛的博客. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8B%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/" data-tooltip="区块链之技术开发指南">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">下一篇</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Bfabric%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" data-tooltip="区块链之Fabric环境搭建">
              
                  <span class="hide-xs hide-sm text-small icon-mr">上一篇</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://hehaitao.vip/2020/06/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fhehaitao.vip%2F2020%2F06%2F%25E5%258C%25BA%25E5%259D%2597%25E9%2593%25BE%25E4%25B9%258Busdt%25E5%25BC%2580%25E5%258F%2591%25E7%25AC%2594%25E8%25AE%25B0%2F">
          <i class="fa fa-facebook-official"></i><span>分享到 Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fhehaitao.vip%2F2020%2F06%2F%25E5%258C%25BA%25E5%259D%2597%25E9%2593%25BE%25E4%25B9%258Busdt%25E5%25BC%2580%25E5%258F%2591%25E7%25AC%2594%25E8%25AE%25B0%2F">
          <i class="fa fa-twitter"></i><span>分享到 Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3A%2F%2Fhehaitao.vip%2F2020%2F06%2F%25E5%258C%25BA%25E5%259D%2597%25E9%2593%25BE%25E4%25B9%258Busdt%25E5%25BC%2580%25E5%258F%2591%25E7%25AC%2594%25E8%25AE%25B0%2F">
          <i class="fa fa-google-plus"></i><span>分享到 Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://hehaitao.vip/profile.jpg" alt="作者的图片" />
    
    <h4 id="about-card-name">何海涛的博客</h4>
    
      <div id="about-card-bio">梦想还是要有的万一实现了呢！ <strong>加油吧少年</strong></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        PM
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        SZ
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://hehaitao.vip/images/cover-v1.2.0.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://hehaitao.vip/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/hehaitao.vip\/2020\/06\/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/';
          
            this.page.identifier = '\/2020\/06\/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B9%8Busdt%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'adityamangal';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  




    
  </body>
</html>

